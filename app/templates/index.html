{% extends 'base.html' %}

{% block title %}Welcome to Code Selling Site{% endblock %}

{% block content %}
   <section class="jumbotron text-center">
       <div class="container">
           <h1 class="display-4">Welcome to Code Selling Site</h1>
           <p class="lead">Discover amazing code products and support developers.</p>
           <a href="{{ url_for('product.index') }}" class="btn btn-primary btn-lg">Shop Now</a>
       </div>
   </section>

   <section class="featured-products py-5">
       <div class="container">
           <h2 class="mb-4">Featured Products</h2>
           <div class="row">
               {% for product in featured_products %}
                   <div class="col-md-4">
                       <div class="card mb-4">
                           <img src="{{ product.image_url }}" class="card-img-top" alt="{{ product.name }}">
                           <div class="card-body">
                               <h5 class="card-title">{{ product.name }}</h5>
                               <p class="card-text">{{ product.description }}</p>
                               <span class="price font-weight-bold">${{ product.price }}</span>
                               <a href="{{ url_for('products.get_product', product_id=product.id) }}" class="btn btn-primary">View Details</a>
                           </div>
                       </div>
                   </div>
               {% endfor %}
           </div>
       </div>
   </section>

   <section class="featured-fundings bg-light py-5">
       <div class="container">
           <h2 class="mb-4">Featured Fundings</h2>
           <div class="row">
               {% for funding in featured_fundings %}
                   <div class="col-md-6">
                       <div class="card mb-4">
                           <div class="card-body">
                               <h5 class="card-title">{{ funding.title }}</h5>
                               <p class="card-text">{{ funding.description }}</p>
                               <div class="progress mb-3">
                                   <div class="progress-bar" role="progressbar" style="width: {{ (funding.current_amount / funding.goal_amount) * 100 }}%;" aria-valuenow="{{ funding.current_amount }}" aria-valuemin="0" aria-valuemax="{{ funding.goal_amount }}"></div>
                               </div>
                               <p>Raised: ${{ funding.current_amount }} / ${{ funding.goal_amount }}</p>
                               <a href="{{ url_for('funding.funding_detail', funding_id=funding.id) }}" class="btn btn-primary">View Details</a>
                           </div>
                       </div>
                   </div>
               {% endfor %}
           </div>
           <div class="text-center mt-4">
               <a href="{{ url_for('funding.funding_list') }}" class="btn btn-primary">View All Fundings</a>
           </div>
       </div>
   </section>

   <section class="cta py-5">
       <div class="container text-center">
           <h2 class="mb-4">Start Selling Your Code</h2>
           <p class="lead">Join our platform and showcase your coding projects to the world.</p>
           <div class="mt-4">
               <a href="{{ url_for('auth.register') }}" class="btn btn-primary mr-2">Sign Up Now</a>
               <a href="{{ url_for('product.create_product') }}" class="btn btn-secondary mr-2">Add Product</a>
               <a href="{{ url_for('funding.funding_create') }}" class="btn btn-secondary">Add Funding Product</a>
           </div>
           {% if current_user.is_authenticated and current_user.is_admin %}
               <div class="mt-4">
                   <a href="{{ url_for('admin.index') }}" class="btn btn-primary">Admin Dashboard</a>
               </div>
           {% endif %}
       </div>
   </section>
{% endblock %}