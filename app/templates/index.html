{% extends 'base.html' %}

{% block title %}Welcome to Code Selling Site{% endblock %}

{% block content %}
    <section class="hero">
        <div class="container">
            <h1>Welcome to Code Selling Site</h1>
            <p>Discover amazing code products and support developers.</p>
            <a href="{{ url_for('product.index') }}" class="btn btn-primary">Shop Now</a>
        </div>
    </section>

    <section class="featured-products">
        <div class="container">
            <h2>Featured Products</h2>
            <div class="product-list">
                {% for product in featured_products %}
                    <div class="product-card">
                        <img src="{{ product.image_url }}" alt="{{ product.name }}">
                        <h3>{{ product.name }}</h3>
                        <p>{{ product.description }}</p>
                        <span class="price">${{ product.price }}</span>
                        <a href="{{ url_for('products.get_product', product_id=product.id) }}" class="btn btn-secondary">View Details</a>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="featured-fundings">
        <div class="container">
            <h2>Featured Fundings</h2>
            <div class="funding-list">
                {% for funding in featured_fundings %}
                    <div class="funding-card">
                        <h3>{{ funding.title }}</h3>
                        <p>{{ funding.description }}</p>
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: {{ (funding.current_amount / funding.goal_amount) * 100 }}%;" aria-valuenow="{{ funding.current_amount }}" aria-valuemin="0" aria-valuemax="{{ funding.goal_amount }}"></div>
                        </div>
                        <p>Raised: ${{ funding.current_amount }} / ${{ funding.goal_amount }}</p>
                        <a href="{{ url_for('funding.funding_detail', funding_id=funding.id) }}" class="btn btn-secondary">View Details</a>
                    </div>
                {% endfor %}
            </div>
            <div class="text-center mt-4">
                <a href="{{ url_for('funding.funding_list') }}" class="btn btn-primary">View All Fundings</a>
            </div>
        </div>
    </section>

    <section class="cta">
        <div class="container">
            <h2>Start Selling Your Code</h2>
            <p>Join our platform and showcase your coding projects to the world.</p>
            <a href="{{ url_for('auth.register') }}" class="btn btn-primary">Sign Up Now</a>
            {% if current_user.is_admin %}
                <a href="{{ url_for('product.create_product') }}" class="btn btn-primary">Add Product</a>
            {% endif %}
        </div>
    </section>
{% endblock %}